<!DOCTYPE html>
<html>
  <head>
    <title>Voil√† Weather Watch - v1.0</title>
    <meta charset="utf-8">
    <link rel="icon" type="image/x-icon" href="./static/brand/fav.ico">
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <link rel="stylesheet" href="./static/css/examples.css" />
    <link rel="stylesheet" href="./static/prism/prism.css" />
    <script defer src="./static/prism/prism.js"></script>
    </head>
    <body>
    <nav class="navbar" style="background-color: #004740;">
      <div class="app-header">
        <a href="/">
          <img src="./static/brand/voila.svg" class="logo">
        </a>
        <a class="title" href="" style="color: #00D6FF;">Weather Watch</a>
      </div>
    </nav>
    <section class="pyscript">
      <div class ="folium" id="folium"></div>
    </section>
    <section class="code">
      <div id="view-code-button" role="button" aria-pressed="false" tabindex="0">Summary</div>
      <div id="code-section" class="code-section-hidden">
        <p>Summary</p>
        <pre class="prism-code language-html">
          <div id="summary"></div>
        </pre>
      </div>
    </section>
  </body>
      <py-config>
        packages = [
          "folium",
          "pandas",
          "geopandas"
        ]

        [[runtimes]]
        src = "./static/pyodide-0.22.0a3-core-ww/pyodide.js"
        name = "pyodide-0.22.0a3"
        lang = "python"
        
        [[fetch]]
        from = "./static/boundaries/"
        files = ["boundaries.geojson"]

        [[fetch]]
        from = "./code/"
        files =["data.py", "map_styles.py", "location.py", "navigation_utils.py"]

      </py-config>
      <py-script src="./code/main.py">
      </py-script>

  <script>
    const viewCodeButton = document.getElementById("view-code-button");
    const codeSection = document.getElementById("code-section");
    const handleClick = () => {
      if (codeSection.classList.contains("code-section-hidden")) {
        codeSection.classList.remove("code-section-hidden");
        codeSection.classList.add("code-section-visible");
      } else {
        codeSection.classList.remove("code-section-visible");
        codeSection.classList.add("code-section-hidden");
      }
    }
    viewCodeButton.addEventListener("click", handleClick)
    viewCodeButton.addEventListener("keydown", (e) => {
      if (e.key === " " || e.key === "Enter" || e.key === "Spacebar") {
        handleClick();
      }
    })
  </script>

</html>
